<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ğ¡ Ğ”Ğ½Ñ‘Ğ¼ Ğ Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ, Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·!</title>
<style>
  :root{
    --bg1: #ffeef6;
    --bg2: #f0e8ff;
    --bg3: #e8f7ff;
    --accent: rgba(255, 255, 255, 0.35);
    --glass: rgba(255,255,255,0.12);
    --text: #2b2b2b;
    --soft: rgba(255,255,255,0.5);
    --rose: #ff8fb1;
    --lav: #bda4ff;
    --sky: #a8e6ff;
  }

  /* page layout */
  html,body{
    height:100%;
    margin:0;
    padding:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  .wrap{
    width:100%;
    min-height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:4vmin 4vmin;
    box-sizing:border-box;
  }
  .progress { display:none; }

  .card{
    width:100%;
    max-width:1100px;
    min-height:60vh;
    background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.25));
    border-radius:18px;
    box-shadow: 0 10px 30px rgba(10,10,10,0.08);
    backdrop-filter: blur(8px) saturate(1.05);
    -webkit-backdrop-filter: blur(8px) saturate(1.05);
    padding:3vmin;
    box-sizing:border-box;
    position:relative;
    overflow:hidden;
    display:grid;
    grid-template-columns: 1fr;
    gap:2vmin;
  }

  /* responsive: side-by-side on wide screens */
  @media(min-width:900px){
    .card{
      grid-template-columns: 1fr 420px;
      padding:4vmin;
    }
  }

  /* animated pastel gradient overlay */
  .gradient-anim{
    position:absolute;
    inset:-20%;
    background: radial-gradient(circle at 10% 20%, rgba(255,140,180,0.12), transparent 6%),
                radial-gradient(circle at 80% 80%, rgba(189,164,255,0.10), transparent 8%),
                radial-gradient(circle at 50% 50%, rgba(168,230,255,0.08), transparent 12%);
    animation: floaty 12s ease-in-out infinite alternate;
    pointer-events:none;
    mix-blend-mode:overlay;
  }
  @keyframes floaty{
    from{transform:translateY(-4%) rotate(-2deg)}
    to{transform:translateY(4%) rotate(2deg)}
  }

  /* particles (magic dust) */
  .particles{
    position:absolute;
    inset:0;
    pointer-events:none;
    background-image: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.9) 0px, transparent 2px),
                      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.8) 0px, transparent 2px),
                      radial-gradient(circle at 70% 20%, rgba(255,255,255,0.85) 0px, transparent 2px),
                      radial-gradient(circle at 85% 80%, rgba(255,255,255,0.75) 0px, transparent 2px);
    background-size: 6px 6px, 5px 5px, 6px 6px, 5px 5px;
    opacity:0.55;
    mix-blend-mode: screen;
    animation: twinkle 6s linear infinite;
  }
  @keyframes twinkle{
    0%{opacity:0.35}
    50%{opacity:0.7}
    100%{opacity:0.45}
  }

  /* left column: hero + text */
  .hero{
    width:100%;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    gap:1.5vmin;
    justify-content:center;
  }

  .title{
    font-weight:800;
    line-height:0.95;
    font-size:8.5vw; /* scales on phone */
    max-width:100%;
    color: #3a2731;
    letter-spacing: -0.02em;
    margin:0;
    position:relative;
    overflow:visible;
  }
  @media(min-width:900px){
    .title{ font-size:42px; }
  }

  /* typewriter/fade-in letters */
  .title .char{
    display:inline-block;
    opacity:0;
    transform:translateY(10%);
    animation: charIn 0.6s forwards;
  }
  @keyframes charIn{
    to{opacity:1; transform:none;}
  }

  .letter-accent{
    background: linear-gradient(90deg, var(--rose), var(--lav), var(--sky));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .subtitle{
    font-size: 3.8vw;
    margin:0.6em 0 0;
    max-width:90%;
    line-height:1.35;
    opacity:0;
    transform:translateY(6%);
    animation: fadeUp 1s 0.9s forwards;
  }
  @media(min-width:900px){
    .subtitle{ font-size:18px; }
  }
  @keyframes fadeUp{
    to{opacity:1; transform:none;}
  }

  .love-note{
    margin-top:1.2em;
    font-size:3.6vw;
    line-height:1.5;
    max-width:95%;
    color:#3b2b2f;
    opacity:0;
    transform:translateY(8%);
    animation: fadeUp 1s 1.15s forwards;
  }
  @media(min-width:900px){
    .love-note{ font-size:16px; }
  }

  /* right column: slideshow + player */
  .side{
    width:100%;
    display:flex;
    flex-direction:column;
    gap:1.2vmin;
    align-items:center;
  }

  .slideshow{
    width:100%;
    max-width:100%;
    border-radius:14px;
    overflow:hidden;
    position:relative;
    min-height:32vh;
    box-shadow: 0 8px 24px rgba(10,10,10,0.08);
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.3));
    border: 1px solid rgba(255,255,255,0.45);
  }
  .slide{
    width:100%;
    height:100%;
    min-height:240px;
    display:block;
    position:absolute;
    inset:0;
    opacity:0;
    transition:opacity 0.8s ease, transform 0.8s ease;
    transform:scale(1.02);
  }
  .slide img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    max-width:100%;
  }
  .slide.show{
    opacity:1;
    transform:none;
    position:relative;
  }

  /* small decorative florals (svg) */
  .floral{
    position:absolute;
    width:70px;
    height:70px;
    right:12px;
    top:12px;
    opacity:0.9;
    transform:rotate(-8deg);
    pointer-events:none;
  }
  @media(max-width:440px){
    .floral{ width:48px; height:48px; right:8px; top:8px; }
  }

  /* player area under slideshow */
  .player{
    max-width: 100%;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap:0.8vmin;
    padding:calc(1.2vmin + 4px);
    border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
    backdrop-filter: blur(6px);
    box-sizing:border-box;
    border: 1px solid rgba(255,255,255,0.45);
  }
  .player .info{
    display:flex;
    gap:0.8vmin;
    align-items:center;
    min-width:0;
  }
  .track-thumb{
    width:56px;
    height:56px;
    border-radius:10px;
    overflow:hidden;
    flex:0 0 56px;
    border:1px solid rgba(255,255,255,0.6);
  }
  .track-thumb img{ width:100%; height:100%; object-fit:cover; display:block; }

  .track-text {
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  }
  .track-title{ font-weight:700; font-size:3.6vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .track-artist{ font-size:2.6vw; opacity:0.7; margin-top:2px; }
  @media(min-width:900px){
    .track-title{ font-size:15px; }
    .track-artist{ font-size:12px; }
  }

  .controls{
    display:flex;
    align-items:center;
    gap:8px;
  }
  .btn{
    background:var(--accent);
    border: none;
    padding:8px 10px;
    border-radius:10px;
    font-size:16px;
    cursor:pointer;
    backdrop-filter: blur(6px);
    transition: transform .15s ease, box-shadow .15s ease;
  }
  .btn:active{ transform:translateY(2px); }
  .btn:hover{ box-shadow: 0 6px 18px rgba(10,10,10,0.08); }

  .progress{
    width:100%;
    height:6px;
    background:rgba(0,0,0,0.07);
    border-radius:6px;
    overflow:hidden;
    margin-left:10px;
  }
  .progress > i{
    display:block;
    height:100%;
    width:0%;
    background:linear-gradient(90deg,var(--rose),var(--lav));
  }

  /* about block + final message */
  .about{
    padding:1.2vmin;
    border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.2));
    border:1px solid rgba(255,255,255,0.35);
    box-sizing:border-box;
    margin-top:0.6vmin;
  }
  .about h3{ margin:0 0 0.4em 0; font-size:4.2vw; }
  .about p{ margin:0; font-size:3.6vw; line-height:1.45; color:#3b2b2f; }
  @media(min-width:900px){
    .about h3{ font-size:18px; }
    .about p{ font-size:14px; }
  }

  .final{
    margin-top:1.4vmin;
    font-weight:800;
    font-size:7.6vw;
    text-align:center;
    padding:0.6em;
    border-radius:14px;
    background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
    box-shadow: 0 8px 30px rgba(100,40,80,0.06);
    color:#4a2b3a;
    mix-blend-mode: normal;
    position:relative;
  }
  @media(min-width:900px){
    .final{ font-size:28px; }
  }

  .final.sparkle{
    text-shadow:
      0 0 12px rgba(255,180,200,0.6),
      0 0 24px rgba(189,164,255,0.25);
    animation: glow 2.6s ease-in-out infinite;
  }
  @keyframes glow{
    0%{filter:brightness(0.98)}
    50%{filter:brightness(1.12)}
    100%{filter:brightness(0.98)}
  }

  /* small footer icons (Kpop/anime) */
  .footer{
    margin-top:1vmin;
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:center;
    opacity:0.9;
    font-size:12px;
  }
  .pill{
    display:inline-flex;
    gap:6px;
    align-items:center;
    padding:6px 10px;
    border-radius:999px;
    background: rgba(255,255,255,0.12);
    border:1px solid rgba(255,255,255,0.3);
  }

  /* small hover micro-animations */
  .track-thumb:hover{ transform:translateY(-4px); transition:transform .25s; }
  .about:hover{ transform:translateY(-4px); transition:transform .25s; }

  /* accessibility: reduce motion */
  @media (prefers-reduced-motion: reduce) {
    .gradient-anim, .particles, .title .char, .subtitle, .love-note { animation: none; }
    .slide{ transition:none; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-label="ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ">
      <div class="gradient-anim" aria-hidden="true"></div>
      <div class="particles" aria-hidden="true"></div>

      <div class="hero">
        <h1 class="title" id="title" aria-label="Ğ¡ Ğ”Ğ½Ñ‘Ğ¼ Ğ Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ, Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·!"></h1>
        <p class="subtitle" id="subtitle">
          Ğ­Ñ‚Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° â€” Ñ‚Ñ‘Ğ¿Ğ»Ğ¾Ğµ Ğ¸Ğ¼Ñ Ğ½Ğ° Ğ³ÑƒĞ±Ğ°Ñ… Ğ¸ Ğ½ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ² ÑĞµÑ€Ğ´Ñ†Ğµ. ĞĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ğ¿Ğ¸ÑÑŒĞ¼Ğ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ‚Ñ‹ Ğ¿Ğ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ°, ĞºĞ°Ğº ÑĞ¸Ğ»ÑŒĞ½Ğ¾ Ñ‚ĞµĞ±Ñ Ñ†ĞµĞ½ÑÑ‚.
        </p>

        <p class="love-note" id="loveNote">
          Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·, Ğ¿Ğ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑÑ Ñ Ğ´Ğ½Ñ‘Ğ¼ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ. Ğ¢Ñ‹ â€” Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğ¹ ĞºĞ°Ñ€Ğ´Ğ¸Ğ¾Ğ»Ğ¾Ğ³, Ñ‡ÑŒÑ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ»ĞµÑ‡Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ´Ñ†Ğ°. Ğ¢Ñ‹ Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ, ÑƒĞ¼Ğ½Ğ°Ñ Ğ¸ Ñ†ĞµĞ»ĞµÑƒÑÑ‚Ñ€ĞµĞ¼Ğ»Ñ‘Ğ½Ğ½Ğ°Ñ. ĞŸÑƒÑÑ‚ÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¿Ñ€Ğ¸Ğ±Ğ»Ğ¸Ğ¶Ğ°ĞµÑ‚ Ñ‚ĞµĞ±Ñ Ğº Ğ¼ĞµÑ‡Ñ‚Ğµ, Ğ° Ñ€ÑĞ´Ğ¾Ğ¼ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ»ÑĞ±Ğ¾Ğ²ÑŒ, Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¸ Ğ²Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ.
        </p>

        <div style="margin-top:1.6vmin;">
          <div class="about" aria-labelledby="aboutTitle">
            <h3 id="aboutTitle">Ğ Ñ‚ĞµĞ±Ğµ</h3>
            <p>Ğ”Ñ–Ğ½Ğ½Ğ°Ğ· â€” ÑĞ»ÑƒÑˆĞ°Ğ¹ ÑĞ²Ğ¾Ñ‘ ÑĞµÑ€Ğ´Ñ†Ğµ: Ñ‚Ñ‹ Ğ²Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²Ğ»ÑĞµÑˆÑŒ Ñ‚ĞµÑ…, ĞºÑ‚Ğ¾ Ñ€ÑĞ´Ğ¾Ğ¼. Ğ¢Ğ²Ğ¾Ñ Ñ€ĞµÑˆĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¼ÑĞ³ĞºĞ¾ÑÑ‚ÑŒ Ğ²Ğ¼ĞµÑÑ‚Ğµ Ğ´ĞµĞ»Ğ°ÑÑ‚ Ğ¼Ğ¸Ñ€ Ğ´Ğ¾Ğ±Ñ€ĞµĞµ.</p>
          </div>

          <div class="final sparkle" id="finalMsg">Ğ¢Ñ‹ Ğ´ĞµĞ»Ğ°ĞµÑˆÑŒ Ğ¼Ğ¸Ñ€ Ğ»ÑƒÑ‡ÑˆĞµ ğŸ’–</div>

          
        </div>
      </div>

      <div class="side">
        <div class="slideshow" id="slideshow" aria-live="polite">
          <!-- slides: Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ src Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ÑƒÑ‚Ğ¸, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ images/photo1.jpg -->
          <div class="slide show" data-index="0">
            <img src="photo/1.jpg" alt="Ğ¤Ğ¾Ñ‚Ğ¾ 1 â€” Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·">
          </div>
          <div class="slide" data-index="1">
            <img src="photo/2.jpg" alt="Ğ¤Ğ¾Ñ‚Ğ¾ 2 â€” Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·">
          </div>
          <div class="slide" data-index="2">
            <img src="photo/3.jpg" alt="Ğ¤Ğ¾Ñ‚Ğ¾ 3 â€” Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·">
          </div>
          <!-- floral accent -->
          <svg class="floral" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <g fill="none" stroke="rgba(255, 120, 150, 0.85)" stroke-width="1.6">
              <path d="M32 8c6 0 10 6 10 12s-4 12-10 12-10-6-10-12S26 8 32 8z" fill="rgba(255,240,245,0.6)"/>
              <path d="M20 44c4 2 8 4 12 4s8-2 12-4" stroke-linecap="round"/>
            </g>
          </svg>
        </div>

        <div class="player" id="player">
          <div class="info">
            <div class="track-thumb" id="thumb">
              <img src="images/photo1.jpg" alt="Ğ¢Ñ€ĞµĞº Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºĞ°">
            </div>
            <div class="track-text">
              <div class="track-title" id="trackTitle">Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ¼ĞµĞ»Ğ¾Ğ´Ğ¸Ñ</div>
              <div class="track-artist" id="trackArtist">For you</div>
              <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
            </div>
          </div>

          <div class="controls" role="group" aria-label="ĞŸĞ»ĞµĞµÑ€">
            <button class="btn" id="prevBtn" title="ĞŸÑ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞº" aria-label="ĞŸÑ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞº">â—€</button>
            <button class="btn" id="playBtn" title="Ğ’Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ¸" aria-label="Ğ’Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ¸">â–¶</button>
            <button class="btn" id="nextBtn" title="Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞº" aria-label="Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞº">â–¶</button>
            <button class="btn" id="muteBtn" title="Ğ’ĞºĞ»/Ğ’Ñ‹ĞºĞ» Ğ·Ğ²ÑƒĞº" aria-label="Ğ’ĞºĞ»/Ğ’Ñ‹ĞºĞ» Ğ·Ğ²ÑƒĞº">ğŸ¶</button>
          </div>
        </div>

        <!-- optional small track list controls -->
        <div style="display:flex; gap:8px; margin-top:8px; justify-content:center; flex-wrap:wrap;">
          <button class="btn" data-track="0">ğ¼ğ‘¡'ğ‘  ğ‘€ğ‘¦ ğ‘ƒğ‘ğ‘Ÿğ‘¡ğ‘¦</button>
          <button class="btn" data-track="1">ğ»ğ‘’ğ‘¦ ğ‘†ğ‘’ğ‘¥ğ‘¦ ğ¿ğ‘ğ‘‘ğ‘¦</button>
          <button class="btn" data-track="2">ğ‘‚ğ‘œğ‘ğ‘ !â€¦ğ¼ ğ·ğ‘–ğ‘‘ ğ¼ğ‘¡ ğ´ğ‘”ğ‘ğ‘–ğ‘›</button>
        </div>
      </div>
    </div>
  </div>

<script>
  // Title: Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ°ÑÑ‰Ğ°ÑÑÑ Ğ¿Ğ¾ Ğ±ÑƒĞºĞ²Ğ°Ğ¼
  (function titleAnim(){
    const titleText = "Ğ¡ Ğ”Ğ½Ñ‘Ğ¼ Ğ Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ, Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·!";
    const el = document.getElementById('title');
    el.innerHTML = '';
    for(let i=0;i<titleText.length;i++){
      const span = document.createElement('span');
      span.className = 'char';
      span.textContent = titleText[i];
      span.style.animationDelay = (i*0.06) + 's';
      if (titleText[i].trim() === 'Ğ”' || titleText[i].trim() === 'Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·!') {
        // accent for name letters (simple heuristic)
        span.classList.add('letter-accent');
      }
      el.appendChild(span);
    }
  })();

  // Slides & player data (replace sources as needed)
  const tracks = [
    { title: "ĞĞµĞ¶Ğ½Ğ°Ñ Ğ¼ĞµĞ»Ğ¾Ğ´Ğ¸Ñ", artist:"Ğ”Ğ»Ñ Ğ”Ñ–Ğ½Ğ½Ğ°Ğ·", audio:"music/1.mp3", img:"photo/4.jpg" },
    { title: "Ğ¢ĞµĞ¿Ğ»Ğ¾Ğµ ÑĞµÑ€Ğ´Ñ†Ğµ", artist:"ĞŸĞ»ĞµĞ¹Ğ»Ğ¸ÑÑ‚", audio:"music/2.mp3", img:"photo/5.jpg" },
    { title: "Ğ¨Ğ°Ğ³ Ğº Ğ¼ĞµÑ‡Ñ‚Ğµ", artist:"Ğ”Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾ ĞºĞ°Ñ€Ğ´Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ°", audio:"music/3.mp3", img:"photo/6.jpg" }
  ];

  const slides = Array.from(document.querySelectorAll('.slide'));
  let current = 0;
  let slideTimer = null;
  const SLIDE_INTERVAL = 5000;

  const audio = new Audio();
  audio.preload = 'auto';
  audio.loop = false;
  audio.volume = 0.9;

  const playBtn = document.getElementById('playBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const muteBtn = document.getElementById('muteBtn');
  const trackTitle = document.getElementById('trackTitle');
  const trackArtist = document.getElementById('trackArtist');
  const thumb = document.getElementById('thumb').querySelector('img');
  const progressBar = document.getElementById('progressBar');

  function showSlide(index){
    slides.forEach(s=>s.classList.remove('show'));
    const s = slides[index];
    if(s) s.classList.add('show');
  }

  function setTrack(index, autoPlay=false){
    index = (index + tracks.length) % tracks.length;
    current = index;
    const t = tracks[index];

    trackTitle.textContent = t.title;
    trackArtist.textContent = t.artist;
    thumb.src = t.img;

    // sync slide to track: find slide with matching image if possible
    const slideIndex = slides.findIndex(slide => {
      const img = slide.querySelector('img');
      return img && img.getAttribute('src') === t.img;
    });
    if(slideIndex >= 0) current = slideIndex;
    showSlide(current);

    audio.src = t.audio;
    if(autoPlay){
      // try to play; mobile browsers may require user interaction
      audio.play().catch(()=>{ /* ignore */ });
      updatePlayButton();
    }
  }

  function nextTrack(auto=false){
    const next = (current + 1) % tracks.length;
    setTrack(next, auto);
  }
  function prevTrack(){
    const prev = (current - 1 + tracks.length) % tracks.length;
    setTrack(prev, true);
  }

  // progress update
  audio.addEventListener('timeupdate', ()=>{
    if(audio.duration){
      progressBar.style.width = (audio.currentTime / audio.duration * 100) + '%';
    }
  });
  audio.addEventListener('ended', ()=> {
    nextTrack(true);
  });

  function startSlideTimer(){
    stopSlideTimer();
    slideTimer = setInterval(()=> {
      const next = (current + 1) % slides.length;
      current = next;
      showSlide(current);
      // when slide changes, optionally change track too
      // here we do gentle auto-sync: if images match, change track
      const currentImg = slides[current].querySelector('img').getAttribute('src');
      const trackMatch = tracks.findIndex(t=>t.img===currentImg);
      if(trackMatch>=0) setTrack(trackMatch, false);
    }, SLIDE_INTERVAL);
  }
  function stopSlideTimer(){ if(slideTimer) clearInterval(slideTimer); slideTimer=null; }

  // buttons
  playBtn.addEventListener('click', ()=>{
    if(audio.src === '' ) setTrack(0, true);
    if(audio.paused){
      audio.play().catch(()=>{/* blocked */});
    } else audio.pause();
    updatePlayButton();
  });
  prevBtn.addEventListener('click', ()=>{ prevTrack(); });
  nextBtn.addEventListener('click', ()=>{ nextTrack(true); });

  muteBtn.addEventListener('click', ()=>{
    audio.muted = !audio.muted;
    muteBtn.textContent = audio.muted ? 'ğŸ”‡' : 'ğŸ”Š';
  });

  function updatePlayButton(){
    if(audio.paused) playBtn.textContent = 'â–¶';
    else playBtn.textContent = 'âšâš';
  }
  audio.addEventListener('play', updatePlayButton);
  audio.addEventListener('pause', updatePlayButton);

  // small track buttons under player
  document.querySelectorAll('[data-track]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const idx = parseInt(btn.getAttribute('data-track'),10);
      setTrack(idx, true);
    });
  });

  // initialize
  showSlide(0);
  setTrack(0,false);
  startSlideTimer();


  // keyboard support
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight') nextTrack(true);
    if(e.key === 'ArrowLeft') prevTrack();
    if(e.key === ' ') { e.preventDefault(); playBtn.click(); }
  });

  // ensure images don't stretch: object-fit already set. fallback: on window resize, adjust min-height for slideshow
  function adjustLayout(){
    const slideBox = document.querySelector('.slideshow');
    if(slideBox){
      const h = Math.min(window.innerHeight * 0.45, 520);
      slideBox.style.minHeight = h + 'px';
    }
  }
  window.addEventListener('resize', adjustLayout);
  adjustLayout();

  // polite hint: try to autoplay muted for visual effect (no sound) â€” mobile may block audible autoplay.
  (function silentAutoplay(){
    const s = slides[0];
    if(s) s.classList.add('show');
    // try to play muted to allow autoplay visuals
    audio.muted = true;
    audio.play().then(()=>{ audio.pause(); audio.muted=false; }).catch(()=>{ audio.muted=false; });
  })();

  // small accessibility: announce final message to screen readers after animations
  setTimeout(()=>{
    const final = document.getElementById('finalMsg');
    final.setAttribute('aria-live','polite');
  }, 2800);
</script>
</body>
</html>
